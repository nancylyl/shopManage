{"remainingRequest":"E:\\学习记录\\作业\\四阶段\\四阶段项目\\shopManage\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\学习记录\\作业\\四阶段\\四阶段项目\\shopManage\\src\\components\\content\\cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\学习记录\\作业\\四阶段\\四阶段项目\\shopManage\\src\\components\\content\\cart.vue","mtime":1595065585717},{"path":"E:\\学习记录\\作业\\四阶段\\四阶段项目\\shopManage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\学习记录\\作业\\四阶段\\四阶段项目\\shopManage\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\学习记录\\作业\\四阶段\\四阶段项目\\shopManage\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\学习记录\\作业\\四阶段\\四阶段项目\\shopManage\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAge21hcEFjdGlvbnMsbWFwR2V0dGVyc30gZnJvbSAndnVleCcKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ2NhcnQnLAogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdLAogICAgICAgICAgICBkaXNjb3VudHRzOiAwLAogICAgICAgICAgICB0b3RhbFByaWNlOiAwLAogICAgICAgICAgICBpc3Nob3c6IiIsCiAgICAgICAgICAgIGRpc2FibGU6IHRydWUKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLiR3YXRjaCgidG90YWxQcmljZSIsIGZ1bmN0aW9uIChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgICAgICAgaWYobmV3VmFsdWUgPj0gODgpIHsKICAgICAgICAgICAgICAgIHRoaXMuaXNzaG93ID0gdHJ1ZQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMuaXNzaG93ID0gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pCiAgICB9LAogICAgbWV0aG9kczp7CiAgICAgICAgLi4ubWFwQWN0aW9ucyhbJ2RlbFByb2R1Y3QnLCdkZWxBbGwnLCdzdWJtaXRPcmRlciddKSwKICAgICAgICB0b09yZGVyKHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvb3JkZXIiKTsgICAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzdWJtaXRPcmRlciIsdmFsdWUpIAogICAgICAgIH0sCiAgICAgICAgdG9ob21lKCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvaG9tZSIpCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7CiAgICAgICAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSB2YWwgICAKICAgICAgICAgICAgbGV0IHJlc2RhdGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh2YWwpKTsgICAgCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc2RhdGEpCiAgICAgICAgICAgIGlmKHJlc2RhdGEgPT0gJycpewogICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlID0gdHJ1ZQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlID0gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgb25UYWJsZVNlbGVjdChyb3dzLCByb3cpIHsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gcm93cy5sZW5ndGggJiYgcm93cy5pbmRleE9mKHJvdykgIT09IC0xCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdGVkKSAgLy8gdHJ1ZeWwseaYr+mAieS4re+8jDDmiJbogIVmYWxzZeaYr+WPlua2iOmAieS4rQogICAgICAgICAgICBpZihzZWxlY3RlZCl7CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUHJpY2UgKz0gcm93LnByb2R1Y3RfUHJpY2Uqcm93Lm51bQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHRoaXMudG90YWxQcmljZSAtPSByb3cucHJvZHVjdF9QcmljZSpyb3cubnVtCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfSwKICAgICAgICBzZWxlY3RBbGwoc2VsZWN0aW9uKXsKICAgICAgICAgICAgbGV0IHNlbGVjdGVkID0gc2VsZWN0aW9uLmxlbmd0aAogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzZWxlY3Rpb24pCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNlbGVjdGVkKQogICAgICAgICAgICBpZihzZWxlY3RlZCAhPSAwKXsKICAgICAgICAgICAgICAgIHRoaXMudG90YWxQcmljZSA9IDAKICAgICAgICAgICAgc2VsZWN0aW9uLm1hcCgoaXRlbSxpbmRleCk9PnsgICAgICAKICAgICAgICAgICAgICAgIHRoaXMudG90YWxQcmljZSArPSBpdGVtLnByb2R1Y3RfUHJpY2UqaXRlbS5udW0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICB0aGlzLnRvdGFsUHJpY2UgPSAwCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGlzQ2hhbmcoKSB7CiAgICAgICAgICAgIHRoaXMudG90YWxQcmljZSA9IDAKICAgICAgICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5tYXAoKGl0ZW0saW5kZXgpPT57IAogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0pICAgIAogICAgICAgICAgICB0aGlzLnRvdGFsUHJpY2UgKz0gaXRlbS5wcm9kdWN0X1ByaWNlKml0ZW0ubnVtCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgY29tcHV0ZWQ6ewogICAgICAgIC4uLm1hcEdldHRlcnMoWydjYXJ0UHJvZHVjdHMnLCdjYXJ0RGF0YSddKSAgIAoKICAgIH0sCn0K"},{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"cart.vue","sourceRoot":"src/components/content","sourcesContent":["<template>\r\n  <div>\r\n        <img class=\"logo\" src=\"http://activity.dapuimg.com/2019082001logo.png\" alt=\"大朴网\" @click=\"tohome\">       \r\n        <div v-if=\"cartProducts == ''\" class=\"empty\">\r\n            <span style=\"font-size: 40px; \">您的购物车还是空的</span>\r\n            <div class=\"goBuy\">\r\n                <el-button type=\"info\" @click=\"tohome\">马上去购物</el-button>\r\n            </div>  \r\n        </div>\r\n        <div v-if=\"cartProducts != ''\">   \r\n            <div class=\"tittle\">\r\n                <strong style=\"float:left\">我的购物车</strong>\r\n                <strong class=\"fRight\" @click=\"delAll\">清空购物车</strong>\r\n            </div>\r\n            <el-table\r\n                :header-cell-style=\"{textAlign:'center',color:'#555'}\"\r\n                :cell-style=\"{textAlign:'center',color:'#555'}\"\r\n                ref=\"multipleTable\"\r\n                :data=\"cartProducts\"\r\n                border\r\n                style=\"width: 85%; margin:0 auto;\"\r\n                tooltip-effect=\"dark\" \r\n                @select='onTableSelect'\r\n                @select-all=\"selectAll\"\r\n                @selection-change=\"handleSelectionChange\">\r\n                    <el-table-column\r\n                    type=\"selection\"\r\n                    width=\"70\">\r\n                    </el-table-column>  \r\n                    <el-table-column\r\n                    label=\"商品信息\" >\r\n                        <template slot-scope=\"scope\">\r\n                            <router-link :to=\"{ path: '/productdetails/' + scope.row.id }\">\r\n                                <img :src=\"scope.row.img\" alt=\"\" style=\"float:left\">\r\n                            </router-link>\r\n                            <router-link :to=\"{ path: '/productdetails/' + scope.row.id }\">{{scope.row.product_Name}}</router-link>\r\n                            <p><span>{{scope.row.Title1+\" \"+scope.row.Title1value}}</span> <span v-if=\"scope.row.Title2!=''\">{{\"、\"+scope.row.Title2+\"\"+scope.row.Title2value}}</span></p>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"商品单价\"\r\n                    width=\"140\">\r\n                        <template slot-scope=\"scope\">\r\n                            <span>¥{{scope.row.product_Price}}</span>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    \r\n                    label=\"商品数量\"\r\n                    width=\"200\"\r\n                    show-overflow-tooltip>\r\n                        <template slot-scope=\"scope\">\r\n                            <el-input-number size=\"mini\" v-model=\"scope.row.num\" :min=\"1\" :max=\"scope.row.stock\" @change=\"isChang()\"></el-input-number>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    label=\"小计\"\r\n                    width=\"140\"\r\n                    show-overflow-tooltip>\r\n                        <template slot-scope=\"scope\">\r\n                            <span>¥{{scope.row.num*scope.row.product_Price}}</span>\r\n                        </template>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                    fixed=\"right\"\r\n                    label=\"操作\"\r\n                    width=\"140\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button  type=\"danger\" @click=\"delProduct(scope.row,)\">删除</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n            </el-table>\r\n            <div class=\"down\" v-show=\"isshow\">\r\n                <h3>已享受到的促销优惠：</h3>\r\n                <p>满88包邮</p>\r\n            </div>\r\n            <div class=\"mydown\" v-if=\"cartProducts != ''\">\r\n                <div>   \r\n                    <p>原始金额：¥{{totalPrice}}</p>\r\n                </div>\r\n                <div>\r\n                    <p style=\"color:red\">优惠金额：¥{{discountts}}</p>\r\n                </div>\r\n                <div>\r\n                    <p style=\"font-weight:700\">商品总金额(不含运费)：¥{{totalPrice-discountts}}</p>\r\n                </div>\r\n                <div class=\"mybutton\">\r\n                    <el-button type=\"info\" @click=\"tohome\">继续购物</el-button>\r\n                    <el-button :disabled=\"disable\" type=\"danger\" @click=\"toOrder(multipleSelection)\">去结算</el-button>\r\n                </div>\r\n            </div>\r\n        </div>      \r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import  {mapActions,mapGetters} from 'vuex'\r\n    export default {\r\n        name: 'cart',\r\n        data(){\r\n            return{\r\n                multipleSelection: [],\r\n                discountts: 0,\r\n                totalPrice: 0,\r\n                isshow:\"\",\r\n                disable: true\r\n            }\r\n        },\r\n        created() {\r\n            this.$watch(\"totalPrice\", function (newValue, oldValue) {\r\n                if(newValue >= 88) {\r\n                    this.isshow = true\r\n                }else{\r\n                    this.isshow = false\r\n                }\r\n            })\r\n        },\r\n        methods:{\r\n            ...mapActions(['delProduct','delAll','submitOrder']),\r\n            toOrder(value) {\r\n                this.$router.push(\"/order\");             \r\n                this.$store.dispatch(\"submitOrder\",value) \r\n            },\r\n            tohome(){\r\n                this.$router.push(\"/home\")\r\n            },\r\n            handleSelectionChange(val) {\r\n                this.multipleSelection = val   \r\n                let resdata=JSON.parse(JSON.stringify(val));    \r\n                // console.log(resdata)\r\n                if(resdata == ''){\r\n                    this.disable = true\r\n                } else {\r\n                    this.disable = false\r\n                }\r\n            },\r\n            onTableSelect(rows, row) {\r\n                let selected = rows.length && rows.indexOf(row) !== -1\r\n                // console.log(selected)  // true就是选中，0或者false是取消选中\r\n                if(selected){\r\n                    this.totalPrice += row.product_Price*row.num\r\n                }else{\r\n                    this.totalPrice -= row.product_Price*row.num\r\n                }\r\n                \r\n            },\r\n            selectAll(selection){\r\n                let selected = selection.length\r\n                // console.log(selection)\r\n                // console.log(selected)\r\n                if(selected != 0){\r\n                    this.totalPrice = 0\r\n                selection.map((item,index)=>{      \r\n                    this.totalPrice += item.product_Price*item.num\r\n                })\r\n                }else{\r\n                    this.totalPrice = 0\r\n                }\r\n            },\r\n            isChang() {\r\n                this.totalPrice = 0\r\n                this.multipleSelection.map((item,index)=>{ \r\n                        // console.log(item)    \r\n                this.totalPrice += item.product_Price*item.num\r\n                })\r\n                }\r\n            },\r\n        computed:{\r\n            ...mapGetters(['cartProducts','cartData'])   \r\n\r\n        },\r\n    }\r\n</script>\r\n<style scoped lang=\"scss\">\r\n@import \"~assets/css/cart/cart.scss\";\r\n</style>"]}]}